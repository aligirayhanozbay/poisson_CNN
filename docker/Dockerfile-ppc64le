FROM ibmcom/tensorflow-ppc64le:latest-gpu-py3-jupyter

RUN tfp-nightly

RUN apt install git
RUN cd / && git clone https://github.com/aligirayhanozbay/poisson_CNN.git
RUN cd /poisson_CNN && pip3 install -e .

RUN cd / && git clone https://github.com/NVIDIA/AMGX
RUN mkdir /AMGX/build
RUN cd /AMGX/build && cmake ../ && make -j160 all
RUN cd / && git clone https://github.com/shwina/pyamgx && cd pyamgx && export AMGX_DIR=/AMGX/ && conda install cython && pip3 install .
ENV AMGX_DIR "/AMGX/"
